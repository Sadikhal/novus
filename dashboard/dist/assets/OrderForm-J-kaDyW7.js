import{r as x,u as y,a as S,b as w,j as e,I as n,C,S as O,l as P,m as E,p as q,q as T,t as V,v as o,B as h,o as F,s as i,_ as I}from"./index-BeksSBPr.js";import{T as A}from"./textarea-r3ViTS5Q.js";const B=F({customerName:i().min(3,{message:"Customer name must be at least 3 characters long!"}).max(10,{message:"Customer name must be at most 10 characters long!"}),number:i().min(10,{message:"Valid mobile number is required"}),status:I(["processing","shipped","delivered"],{message:"Status is required!"}),pincode:i().length(6,{message:"Pincode must be 6 digits long!"}),address:i().min(1,{message:"Address is required!"})}),k=({data:r,type:c,setOpen:d,onSuccess:g})=>{const[l,m]=x.useState(!1),{toast:u}=y(),b={customerName:"",number:"",status:"processing",pincode:"",address:"",...r||{}},{register:a,handleSubmit:v,reset:p,control:f,formState:{errors:s}}=S({resolver:w(B),defaultValues:b});x.useEffect(()=>{r&&p(r)},[r,p]);const j=async t=>{m(!0);try{await g(t),u({variant:"success",title:"Order updated successfully",description:"Your changes have been saved"}),d(!1)}catch(N){u({variant:"destructive",title:"Operation failed",description:N.message||"Please try again later"})}finally{m(!1)}};return e.jsxs("form",{className:"flex flex-col gap-6 p-2 sm:p-4",onSubmit:v(j),children:[e.jsxs("h1",{className:"text-xl font-semibold border-b-[#384e60] border-b-2 pb-2",children:[c==="create"?"Create New":"Edit"," Order"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(n,{label:"Customer Name",name:"customerName",type:"text",register:a,error:s.customerName}),e.jsx(n,{label:"Phone Number",name:"number",type:"number",register:a,error:s.number}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Order Status"}),e.jsx(C,{name:"status",control:f,render:({field:t})=>e.jsxs(O,{onValueChange:t.onChange,value:t.value,children:[e.jsxs(P,{className:"border-gray-200 rounded-lg px-2 py-3 text-sm bg-white shadow-sm items-center capitalize text-nowrap flex flex-row justify-between font-medium focus:ring-[#424848]",children:[e.jsx(E,{placeholder:"Order Status"}),e.jsx(q,{className:"h-4 w-4"})]}),e.jsx(T,{className:"bg-white",children:e.jsxs(V,{children:[e.jsx(o,{className:"cursor-pointer hover:bg-[#44655c] py-2 hover:text-white",value:"processing",children:"Processing"}),e.jsx(o,{className:"cursor-pointer hover:bg-[#44655c] py-2 hover:text-white",value:"shipped",children:"Shipped"}),e.jsx(o,{className:"cursor-pointer hover:bg-[#44655c] py-2 hover:text-white",value:"delivered",children:"Delivered"})]})})]})}),s.status&&e.jsx("p",{className:"text-sm font-medium text-destructive",children:s.status.message})]}),e.jsx(n,{label:"Pincode",name:"pincode",type:"number",register:a,error:s.pincode}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(A,{label:"Address",name:"address",register:a,error:s?.address,rows:4,placeholder:"Enter delivery address...",className:"ring-gray-500 ring-[1.2px]"})})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[e.jsx(h,{type:"button",variant:"secondary",onClick:()=>d(!1),disabled:l,children:"Cancel"}),e.jsx(h,{type:"submit",variant:"primary",disabled:l,children:l?"Processing...":c==="create"?"Create Order":"Save Changes"})]})]})};export{k as default};
