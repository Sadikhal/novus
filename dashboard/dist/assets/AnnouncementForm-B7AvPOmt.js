import{r as m,u as h,a as j,b as y,j as e,I as N,B as x}from"./index-BeksSBPr.js";import{T as v}from"./textarea-r3ViTS5Q.js";import{z as r}from"./external-xFoQYDlx.js";const S=r.object({title:r.string().min(4,{message:"Title must be at least 4 characters long!"}).max(20,{message:"Title must be at most 20 characters long!"}),desc:r.string().min(10,{message:"Description must be at least 10 characters long!"}).max(60,{message:"Description must be at most 60 characters long!"})}),E=({data:s,type:n,setOpen:l,onSuccess:d})=>{const[a,i]=m.useState(!1),{toast:u}=h(),{register:c,handleSubmit:g,reset:o,formState:{errors:t}}=j({resolver:y(S),defaultValues:s||{}});m.useEffect(()=>{s&&o(s)},[s,o]);const f=async p=>{i(!0);try{await d(p),l(!1)}catch(b){u({variant:"destructive",title:"Operation failed",description:b.message||"Please try again later"})}finally{i(!1)}};return e.jsxs("form",{className:"flex flex-col gap-6 p-4",onSubmit:g(f),children:[e.jsxs("h1",{className:"text-xl font-semibold border-b-[#384e60] border-b-2 pb-2",children:[n==="create"?"Create New":"Edit"," Announcement"]}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(N,{label:"Title",name:"title",type:"text",register:c,error:t.title,className:"w-full"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Description"}),e.jsx(v,{name:"desc",register:c,error:t?.desc,rows:4,placeholder:"Enter announcement description...",className:"ring-gray-500 ring-[1.2px] w-full"}),t?.desc?.message&&e.jsx("p",{className:"text-xs text-red-400",children:t.desc.message.toString()})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[e.jsx(x,{type:"button",onClick:()=>l(!1),disabled:a,variant:"secondary",children:"Cancel"}),e.jsx(x,{type:"submit",variant:"primary",disabled:a,children:a?"Processing...":n==="create"?"Create":"Save Changes"})]})]})};export{E as default};
