import{r as c,u as h,a as j,b as S,j as e,I as i,B as d}from"./index-BeksSBPr.js";import{T as v}from"./textarea-r3ViTS5Q.js";import{z as t}from"./external-xFoQYDlx.js";const y=t.object({title:t.string().min(4,{message:"title must be at least 4 characters long!"}).max(20,{message:"Username must be at most 20 characters long!"}),desc:t.string().min(10,{message:"Description must be at least 10 characters long!"}).max(60,{message:"Description must be at most 60 characters long!"}),startingDate:t.string({message:"Starting Date is required!"}),startingTime:t.string({message:"Starting time is required!"}),endingDate:t.string({message:"Ending date is required!"}),endingTime:t.string({message:"Ending time is required!"})}),C=({data:s,type:l,setOpen:m,onSuccess:p})=>{const[n,g]=c.useState(!1),{toast:u}=h(),b={startingDate:new Date().toISOString().split("T")[0],endingDate:new Date().toISOString().split("T")[0],startingTime:"09:00",endingTime:"17:00",...s||{}},{register:a,handleSubmit:x,reset:o,formState:{errors:r}}=j({resolver:S(y),defaultValues:b});c.useEffect(()=>{s&&o({...s,startingDate:s.startingDate.split("T")[0],endingDate:s.endingDate.split("T")[0]})},[s,o]);const f=async D=>{g(!0);try{await p(D),m(!1)}catch(T){u({variant:"destructive",title:"Operation failed",description:T.message||"Please try again later"})}finally{g(!1)}};return e.jsxs("form",{className:"flex flex-col gap-6 p-2 sm:p-4",onSubmit:x(f),children:[e.jsxs("h1",{className:"text-xl font-semibold border-b-[#384e60] border-b-2 pb-2",children:[l==="create"?"Create New":"Edit"," Event"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(i,{label:"Event title",name:"title",type:"text",register:a,error:r.title,className:"md:col-span-2"}),e.jsx(i,{label:"Starting Date",name:"startingDate",type:"date",register:a,error:r.startingDate}),e.jsx(i,{label:"Starting Time",name:"startingTime",type:"time",register:a,error:r.startingTime}),e.jsx(i,{label:"Ending Date",name:"endingDate",type:"date",register:a,error:r.endingDate}),e.jsx(i,{label:"Ending Time",name:"endingTime",type:"time",register:a,error:r.endingTime})]}),e.jsx(v,{label:"Description *",name:"desc",register:a,error:r?.desc,rows:4,placeholder:"Enter event description...",className:"ring-gray-500 ring-[1.2px]"}),e.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[e.jsx(d,{type:"button",variant:"secondary",onClick:()=>m(!1),disabled:n,children:"Cancel"}),e.jsx(d,{type:"submit",variant:"primary",disabled:n,children:n?"Processing...":l==="create"?"Create Event":"Save Changes"})]})]})};export{C as default,y as eventschema};
